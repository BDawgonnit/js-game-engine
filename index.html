<!DOCTYPE html>
<html>
<head>
	<title>Game</title>

	<!-- CSS -->
	<style>
		/* Reset */
		* { margin:0; padding:0; box-sizing: border-box; }

		/* Set Overall Background Color */
		body { background: black; }

		.outer { display: table; width: 100vw; height: 100vh; border-collapse: collapse; }
		.inner { display: table-cell; vertical-align: middle; }

		/* Style the canvas (max width and height of full viewport, keep aspect ratio) */
		canvas {
			display: block;
			max-width: 100vw;
			max-height: 100vh;
			background: white;
			margin: 0px auto;
		}
	</style>
</head>
<body>

	<!-- HTML Content -->
	<div class="outer">
		<div class="inner">
			<canvas id="game" width="1920" height="1080"></canvas>
		</div>
	</div>

	<!-- JS (Using custom module system, so we must include each js file here for require's to work) -->
	<script src="js/moduleSystem.js"></script>
	<script src="js/utilities.js"></script>
	<script src="js/assetManager.js"></script>
	<script src="js/tiledMap.js"></script>

	<script id="instantiator">
		(function() {
			'use strict';
			var assetManager = require('assetManager');
			var TiledMap = require('TiledMap');

			var map = new TiledMap('json/level1.json', function() {
				let canvas = document.getElementById('game');
				let context = canvas.getContext('2d');

				let previousTime = performance.now();
				let callbackId = null;

				//map.bgm.play();

				function main(timestamp) {
					callbackId = window.requestAnimationFrame(main);
					map.renderToCanvas(canvas, 'Background', timestamp);
					map.renderToCanvas(canvas, 'Platforms', timestamp);
					previousTime = timestamp;
				}
				main(previousTime); // Start the cycle
			});

			// To test on Xbox: https://msdn.microsoft.com/windows/uwp/xbox-apps/devkit-activation
			// To test on PS4...you need a bunch of steps: https://www.playstation.com/en-us/develop/
			// To test on Wii U/3ds: https://developer.nintendo.com/the-process

		})();
	</script>
</body>
</html>
